<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de array</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>
    <h1>Lista de Tarefas</h1>
    <header>
        <input id="inputTarefa" type="text" placeholder="Digite Sua Tarefa">
        <button onclick="adicionarTarefa()" id="btn-add" class="add">Adicionar</button>
    </header>

    <main id="tarefas">
    </main>
    <script>
        let listaTarefa = [ ]
        let input = document.getElementById("inputTarefa")
        let divTarefas = document.getElementById("tarefas")

        const limparInput = (id) => {
            document.getElementById(id).value = ''
        }
        
        const adicionarTarefa = () => {

            let inputValue = input.value.trim()

            if (inputValue === "" || inputValue === null) return

            let tarefaLista = {
                tarefa: inputValue,
                status: true
            }

            listaTarefa.push(tarefaLista)

            renderizarTarefas()

            limparInput("inputTarefa")
        }

        const excluirTarefa = (i) => {
            listaTarefa.splice(i, 1)
            renderizarTarefas()
        }

        const dblClickTarefa = (i) => {
            listaTarefa[i].status = !listaTarefa[i].status
            renderizarTarefas()
        }

        const renderizarTarefas = () => {
            divTarefas.innerHTML = ''

            listaTarefa.sort((a, b) => a.status === b.status ? 0 : a.status ? -1 : 1)
            
            let tamanhoLista = listaTarefa.length
            for (let i = 0; i < tamanhoLista; i++) {

                let classeItem = listaTarefa[i].status ? "item" : "item clicado"
                let iconeClasse = listaTarefa[i].status ? "mdi-circle-outline" : "mdi-check-circle"

                divTarefas.innerHTML += `
                    <div id="${i}" class="${classeItem}">
                        <div ondblclick="dblClickTarefa(${i})" class="item-icone">
                            <i id="icone_${i}" class="mdi ${iconeClasse}"></i>
                        </div>
                        <div ondblclick="dblClickTarefa(${i})" class="item-nome">
                            ${listaTarefa[i].tarefa}
                        </div>
                        <div class="item-botao">
                            <button onclick="excluirTarefa(${i})" class="delete">
                                <i class="mdi mdi-delete"></i> Deletar
                            </button>
                        </div>
                    </div>
                `
            }
        }
    </script>
</body>

</html>